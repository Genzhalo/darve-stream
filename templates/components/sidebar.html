<style>
    /* Sidebar layout */
    .sidebar {
        width: var(--sidebar-w);
        min-height: 100vh;
        background: var(--bg-panel);
        border-right: 1px solid var(--border);
        display: flex;
        flex-direction: column;
        flex-shrink: 0;
        position: relative;
        z-index: 10;
    }

    /* ── Brand ── */
    .sidebar__brand {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 20px 18px 18px;
        border-bottom: 1px solid var(--border);
    }

    .brand__avatar {
        width: 34px;
        height: 34px;
        border-radius: 50%;
        background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 13px;
        font-weight: 700;
        color: #fff;
        flex-shrink: 0;
        letter-spacing: -.3px;
    }

    .brand__name {
        font-size: 15px;
        font-weight: 600;
        color: var(--text-primary);
        letter-spacing: -.3px;
    }

    /* ── Nav ── */
    .sidebar__nav {
        padding: 14px 10px;
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 2px;
    }

    .nav-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 9px 10px;
        border-radius: var(--radius-md);
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        color: var(--text-muted);
        text-decoration: none;
        transition: background .15s, color .15s;
        position: relative;
    }

    .nav-item:hover {
        background: rgba(255, 255, 255, .04);
        color: var(--text-primary);
    }

    .nav-item.is-active {
        background: rgba(59, 130, 246, .12);
        color: var(--accent);
    }

    .nav-item.is-active::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 3px;
        height: 18px;
        border-radius: 0 3px 3px 0;
        background: var(--accent);
    }

    .nav-item__icon {
        width: 18px;
        height: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        opacity: .75;
    }

    .nav-item.is-active .nav-item__icon {
        opacity: 1;
    }

    /* ── Footer ── */
    .sidebar__footer {
        padding: 14px 12px;
        border-top: 1px solid var(--border);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
    }

    .user-info {
        display: flex;
        align-items: center;
        gap: 8px;
        min-width: 0;
    }

    .user-node {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: var(--bg-input);
        border: 1px solid var(--border);
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        font-size: 11px;
        font-weight: 700;
        color: var(--text-muted);
    }

    .user-avatar {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }

    .user-name {
        font-size: 12px;
        font-weight: 600;
        color: var(--text-primary);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 110px;
    }

    .logout-btn {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 10px;
        border-radius: var(--radius-sm);
        border: 1px solid var(--border);
        background: var(--bg-input);
        color: var(--text-muted);
        font-size: 12px;
        font-weight: 600;
        text-decoration: none;
        transition: color .15s, background .15s, border-color .15s;
    }

    .logout-btn:hover {
        color: var(--text-primary);
        background: var(--bg-card);
        border-color: var(--border-active);
    }
</style>

<aside class="sidebar" id="sidebar">

    <!-- Brand -->
    <div class="sidebar__brand">
        <div class="brand__avatar">D</div>
        <span class="brand__name">Darve</span>
    </div>

    <!-- Navigation -->
    <nav class="sidebar__nav" role="navigation" aria-label="Main navigation">

        <a class="nav-item" href="/dashboard" hx-get="/dashboard" hx-target="#main-content" hx-select="#main-content"
            hx-swap="outerHTML" hx-push-url="/dashboard">
            <span class="nav-item__icon">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.6"
                    stroke-linecap="round" stroke-linejoin="round">
                    <rect x="1" y="1" width="6" height="6" rx="1.2" />
                    <rect x="9" y="1" width="6" height="6" rx="1.2" />
                    <rect x="1" y="9" width="6" height="6" rx="1.2" />
                    <rect x="9" y="9" width="6" height="6" rx="1.2" />
                </svg>
            </span>
            Dashboard
        </a>

        <a class="nav-item" href="/chat" hx-get="/chat" hx-target="#main-content" hx-select="#main-content"
            hx-swap="outerHTML" hx-push-url="/chat">
            <span class="nav-item__icon">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.6"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 10.5a1.5 1.5 0 0 1-1.5 1.5H5l-3 3V3.5A1.5 1.5 0 0 1 3.5 2h9A1.5 1.5 0 0 1 14 3.5v7Z" />
                </svg>
            </span>
            Chat
        </a>

        <a class="nav-item" href="/donate" hx-get="/donate" hx-target="#main-content" hx-select="#main-content"
            hx-swap="outerHTML" hx-push-url="/donate">
            <span class="nav-item__icon">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.6"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M8 13.5S1.5 9.5 1.5 5.5a3.5 3.5 0 0 1 6.5-1.8A3.5 3.5 0 0 1 14.5 5.5c0 4-6.5 8-6.5 8Z" />
                </svg>
            </span>
            Donate
        </a>

        <a class="nav-item" href="/stream" hx-get="/stream" hx-target="#main-content" hx-select="#main-content"
            hx-swap="outerHTML" hx-push-url="/stream">
            <span class="nav-item__icon">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.6"
                    stroke-linecap="round" stroke-linejoin="round">
                    <rect x="1" y="3" width="14" height="10" rx="1.5" />
                    <path d="M5 13.5v1.5m6-1.5v1.5M3 15h10" />
                </svg>
            </span>
            Stream
        </a>

    </nav>

    <!-- User node -->
    <div class="sidebar__footer">
        <div class="user-info">
            <div class="user-node">
                {% if let Some(image_uri) = user.image_uri %}
                <img class="user-avatar" src="{{ image_uri }}" alt="{{ user.username }} avatar" />
                {% endif %}
            </div>
            <div class="user-name">{{ user.username }}</div>
        </div>
        <a class="logout-btn" href="/auth/logout">
            <span class="logout-btn__icon" aria-hidden="true">
                <svg width="14" height="14" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M6 2.5H3.5A1.5 1.5 0 0 0 2 4v8a1.5 1.5 0 0 0 1.5 1.5H6" />
                    <path d="M10 4.5L13.5 8 10 11.5" />
                    <path d="M13.5 8H6" />
                </svg>
            </span>
        </a>
    </div>

</aside>